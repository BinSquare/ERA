---
title: Quickstart - Local / Self-Hosted (Go/CLI)
description: Get started with ERA Agent locally using Go and CLI
---

This guide will help you build and run ERA Agent locally on your machine. Perfect for development, testing, or self-hosted deployments with complete control and privacy.

## Prerequisites

### Required

- **Go 1.21+** - [Install Go](https://go.dev/doc/install)
- **Docker** (macOS/Windows) or **Firecracker** (Linux) - For running code sandboxes

### Optional

- **Claude Desktop** - For MCP integration
- **jq** - For JSON processing in CLI examples
- **git** - For cloning the repository

## Installation

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/era-agent
cd era-agent
```

### 2. Build the Agent

```bash
# Build the Go binary
go build -o agent

# Make it executable
chmod +x agent

# Verify installation
./agent --help
```

You should see output showing available commands:
```
ERA Agent - ERA Runtime Agent

Usage:
  agent [command]

Available Commands:
  vm          Manage VMs
  server      Start HTTP server
  mcp         Start MCP server
  version     Show version info
  help        Help about any command

Flags:
  --log-level string   Log level (debug, info, warn, error) (default "info")
```

### 3. Set Up Sandbox Environment

The sandbox environment depends on your operating system:

**macOS:**
```bash
# Install Docker Desktop
brew install --cask docker

# Start Docker Desktop from Applications
# Wait for Docker to fully start
```

**Linux:**
```bash
# Install Firecracker
# See: https://github.com/firecracker-microvm/firecracker/blob/main/docs/getting-started.md

# Verify KVM access
ls -l /dev/kvm
# Should show: crw-rw---- 1 root kvm ...

# Add your user to kvm group
sudo usermod -aG kvm $USER
newgrp kvm  # Or log out and back in
```

**Windows:**
```bash
# Install Docker Desktop with WSL2 backend
# Download from: https://docs.docker.com/desktop/install/windows-install/

# Ensure WSL2 is enabled and Docker is using WSL2 backend
```

## Quick Start: CLI Usage

The CLI is the fastest way to test ERA Agent locally.

### Example 1: Simple Python Execution

```bash
# Create a Python VM
VM_ID=$(./agent vm create --language python | grep -o 'ID=[a-zA-Z0-9-]*' | cut -d'=' -f2 | head -n1 | cut -d' ' -f1)
echo "VM ID: $VM_ID"

# Run Python code
./agent vm run --vm $VM_ID --cmd 'python3 -c "print(\"Hello from ERA Agent!\"); print(2 + 2)"' --timeout 30

# Clean up
./agent vm clean --vm $VM_ID
```

### Example 2: Multi-Step Workflow

```bash
# Create persistent Python VM
VM_ID=$(./agent vm create --language python --persist | grep -o 'ID=[a-zA-Z0-9-]*' | cut -d'=' -f2 | head -n1 | cut -d' ' -f1)

# Step 1: Define variables
./agent vm run --vm $VM_ID --cmd 'python3 -c "
x = 42
y = 100
print(f\"Initialized: x={x}, y={y}\")
"' --timeout 30

# Step 2: Use variables (they persist!)
./agent vm run --vm $VM_ID --cmd 'python3 -c "
result = x + y
print(f\"Result: {x} + {y} = {result}\")
"' --timeout 30

# List VMs to see current state
./agent vm list

# Clean up when done
./agent vm clean --vm $VM_ID
```

### Example 3: Multiple Languages

**Node.js:**
```bash
VM_ID=$(./agent vm create --language node | grep -o 'ID=[a-zA-Z0-9-]*' | cut -d'=' -f2 | head -n1 | cut -d' ' -f1)
./agent vm run --vm $VM_ID --cmd 'node -e "console.log(\"Hello from Node.js!\"); console.log(Math.PI)"' --timeout 30
./agent vm clean --vm $VM_ID
```

**Go:**
```bash
VM_ID=$(./agent vm create --language golang | grep -o 'ID=[a-zA-Z0-9-]*' | cut -d'=' -f2 | head -n1 | cut -d' ' -f1)
echo 'package main
import "fmt"
func main() { fmt.Println("Hello from Go!") }' > /tmp/hello.go

./agent vm run --vm $VM_ID --cmd "go run /tmp/hello.go" --timeout 30
./agent vm clean --vm $VM_ID
```

**Ruby:**
```bash
VM_ID=$(./agent vm create --language ruby | grep -o 'ID=[a-zA-Z0-9-]*' | cut -d'=' -f2 | head -n1 | cut -d' ' -f1)
./agent vm run --vm $VM_ID --cmd 'ruby -e "puts \"Hello from Ruby!\""' --timeout 30
./agent vm clean --vm $VM_ID
```

## Quick Start: HTTP Server

For REST API access, run ERA Agent as an HTTP server.

### Start the Server

```bash
# Start on default port (8080)
./agent server

# Or specify custom port
PORT=9000 ./agent server

# Or use environment variable
AGENT_MODE=http PORT=8080 ./agent
```

### Test the Server

```bash
# Create a VM
curl -X POST http://localhost:8080/api/vm/create \
  -H "Content-Type: application/json" \
  -d '{
    "language": "python",
    "cpu": 1,
    "memory": 256,
    "persist": true
  }'

# Execute code in VM (replace abc123 with actual VM ID from create response)
curl -X POST http://localhost:8080/api/vm/execute \
  -H "Content-Type: application/json" \
  -d '{
    "vm_id": "abc123",
    "command": "python -c \"print(\\\"Hello from HTTP API!\\\")\\nprint([x**2 for x in range(10)])\"",
    "timeout": 30
  }'

# Execute code in temporary VM
curl -X POST http://localhost:8080/api/vm/temp \
  -H "Content-Type: application/json" \
  -d '{
    "language": "python",
    "command": "x = 42\\nprint(f\\\"x = {x}\\\")",
    "cpu": 1,
    "memory": 256
  }'

# List all VMs
curl http://localhost:8080/api/vm/list
```

## Quick Start: MCP Server for Claude Desktop

ERA Agent can run as an MCP (Model Context Protocol) server for Claude Desktop.

### 1. Configure Claude Desktop

Create or edit your Claude Desktop config:

**macOS:**
```bash
mkdir -p ~/Library/Application\ Support/Claude
cat > ~/Library/Application\ Support/Claude/claude_desktop_config.json << 'EOF'
{
  "mcpServers": {
    "era-agent-local": {
      "command": "/absolute/path/to/agent",
      "args": ["mcp"]
    }
  }
}
EOF
```

**Linux:**
```bash
mkdir -p ~/.config/Claude
cat > ~/.config/Claude/claude_desktop_config.json << 'EOF'
{
  "mcpServers": {
    "era-agent-local": {
      "command": "/absolute/path/to/agent",
      "args": ["mcp"]
    }
  }
}
EOF
```

**Windows:**
```powershell
# Edit: %APPDATA%\Claude\claude_desktop_config.json
{
  "mcpServers": {
    "era-agent-local": {
      "command": "C:\\path\\to\\agent.exe",
      "args": ["mcp"]
    }
  }
}
```

**Important:** Replace `/absolute/path/to/agent` with the full path to your agent binary:
```bash
# Get the full path
pwd  # Shows current directory
# If agent is in current directory: /Users/yourname/era-agent/agent
```

### 2. Restart Claude Desktop

Quit Claude Desktop completely (Cmd+Q on macOS, not just close) and reopen it.

### 3. Test with Claude

In a new conversation, try:
```
Run this Python code:
print("Hello from Claude + ERA Agent!")
print([x**2 for x in range(10)])
```

Claude should execute the code using ERA Agent and show you the results!

## Configuration

### Environment Variables

Control agent behavior with environment variables:

```bash
# Operation mode
export AGENT_MODE=http              # Run as HTTP server

# Server settings
export PORT=8080                    # HTTP server port

# Logging
export AGENT_LOG_LEVEL=debug        # Log level: debug, info, warn, error

# State directory
export AGENT_STATE_DIR=/custom/path # Custom state storage path
```

### Configuration File

Create a `.env` file for persistent configuration:

```bash
# .env
AGENT_MODE=http
PORT=8080
AGENT_LOG_LEVEL=info
AGENT_STATE_DIR=/var/lib/era-agent
```

Load it:
```bash
source .env
./agent
```

### CLI Flags

Most settings can also be set via CLI flags:

```bash
# Global log level
./agent --log-level debug vm create --language python

# VM-specific settings
./agent vm create \
  --language python \
  --cpu 2 \
  --mem 512 \
  --network allow_all \
  --persist
```

## Common Workflows

### Development Workflow

```bash
# 1. Start HTTP server in background
./agent server &
SERVER_PID=$!

# 2. Test your code (create VM and execute)
VM_ID=$(curl -s -X POST http://localhost:8080/api/vm/create \
  -H "Content-Type: application/json" \
  -d '{"language": "python", "cpu": 1, "memory": 256}' | \
  jq -r '.data.id')

curl -X POST http://localhost:8080/api/vm/execute \
  -H "Content-Type: application/json" \
  -d "{\"vm_id\": \"$VM_ID\", \"command\": \"print(\\\"Hello from dev workflow!\\\")\", \"timeout\": 30}"

# 3. View logs
tail -f /var/log/era-agent.log

# 4. Stop server
kill $SERVER_PID
```

### Testing Workflow

```bash
# Create test session
VM_ID=$(./agent vm create --language python --persist | grep -o 'Created.*: .*' | cut -d':' -f2 | tr -d ' ')

# Run test suite
for test in tests/*.py; do
  echo "Running $test..."
  ./agent vm run --vm $VM_ID --file "$test"
done

# Clean up
./agent vm clean --vm $VM_ID
```

### Automation Workflow

```bash
#!/bin/bash
# process-data.sh - Automated data processing

# Create session
SESSION_ID=$(./agent vm create --language python --persist | ...)

# Install dependencies
./agent vm run --vm $SESSION_ID --cmd "pip install pandas numpy"

# Process data files
for file in data/*.csv; do
  ./agent vm run --vm $SESSION_ID --file "process.py" --env "INPUT_FILE=$file"
done

# Clean up
./agent vm clean --vm $SESSION_ID
```

## CLI Command Reference

### VM Management

```bash
# Create VM
./agent vm create --language <lang> [options]

# Run code
./agent vm run --vm <id> --cmd <command> --timeout <seconds>
./agent vm run --vm <id> --file <path> --timeout <seconds>

# Execute on multiple VMs
./agent vm exec --cmd <command> --timeout <seconds> --vm <id> [options]

# Execute in temporary VM
./agent vm temp --language <lang> --cmd <command> --timeout <seconds> [options]

# List VMs
./agent vm list

# Interactive shell
./agent vm shell --vm <id>

# Clean up VM
./agent vm clean --vm <id>
```

### Server Modes

```bash
# HTTP server
./agent server
PORT=9000 ./agent server

# MCP server (for Claude Desktop)
./agent mcp
```

### Options

```bash
# Global
--log-level <level>    # debug, info, warn, error

# VM Create
--language <lang>      # python, javascript, node, ruby, golang
--cpu <count>          # CPU cores (default: 1)
--mem <mib>            # Memory in MiB (default: 256)
--network <mode>       # none (default), allow_all
--persist              # Enable persistent volume

# VM Run
--vm <id>              # VM ID
--cmd <command>        # Command to execute
--file <path>          # Optional file to stage inside /in
--timeout <seconds>    # Execution timeout (required, must be > 0)

# VM Exec
--all                  # Execute on all ready VMs
--vm <id>              # Target VM identifier (repeatable)
--timeout <seconds>    # Execution timeout (required, must be > 0)

# VM Temp
--language <lang>      # Language: python, javascript, node, ruby, golang
--cpu <count>          # CPU cores (default: 1)
--mem <mib>            # Memory in MiB (default: 256)
--network <mode>       # none (default), allow_all
--persist              # Enable persistent volume
--timeout <seconds>    # Execution timeout (required, must be > 0)

# VM List
--status <state>       # Filter by VM status
--all                  # Include stopped VMs
```

## Troubleshooting

### "Failed to start VM"

**Problem:** Docker or Firecracker not running

**Solutions:**
- **macOS:** Start Docker Desktop and wait for it to fully initialize
- **Linux:** Check Firecracker installation and KVM access: `ls -l /dev/kvm`
- **Windows:** Ensure Docker Desktop is running with WSL2 backend

### "Context deadline exceeded"

**Problem:** Execution timeout

**Solution:**
```bash
# Increase timeout
./agent vm run --vm <id> --cmd "..." --timeout 120

# Or set longer default when creating session
./agent vm create --language python --timeout 60
```

### "Command not found: agent"

**Problem:** Agent binary not in PATH

**Solutions:**
```bash
# Use relative path
./agent vm create --language python

# Or add to PATH
sudo cp agent /usr/local/bin/
agent vm create --language python

# Or create alias
echo 'alias agent=/path/to/agent' >> ~/.bashrc
source ~/.bashrc
```

### "Port already in use"

**Problem:** Port 8080 is occupied

**Solution:**
```bash
# Use different port
PORT=9000 ./agent server

# Or kill existing process
lsof -ti:8080 | xargs kill
./agent server
```

### Verbose Logging

Enable debug logging for troubleshooting:

```bash
# CLI
./agent --log-level debug vm create --language python

# HTTP Server
AGENT_LOG_LEVEL=debug ./agent server

# MCP Server
AGENT_LOG_LEVEL=debug ./agent mcp
```

## Performance Tips

### Resource Allocation

```bash
# High-memory tasks
./agent vm create --language python --mem 1024

# Multi-core processing
./agent vm create --language python --cpu 4

# Faster sessions (non-persistent)
./agent vm create --language python  # Omit --persist flag
```

### Session Reuse

```bash
# Reuse sessions instead of creating new ones
VM_ID=$(./agent vm create --language python --persist | ...)

# Run multiple operations
./agent vm run --vm $VM_ID --cmd "pip install pandas"
./agent vm run --vm $VM_ID --file script1.py
./agent vm run --vm $VM_ID --file script2.py

# Clean up once at the end
./agent vm clean --vm $VM_ID
```

## Security Considerations

### Network Access

Network is **disabled by default**. Enable only when needed:

```bash
# Enable network access
./agent vm create --language python --network allow_all

# Or via HTTP API
{
  "language": "python",
  "network_mode": "allow_all"
}
```

### Resource Limits

Always set appropriate limits:

```bash
# Limit resources
./agent vm create \
  --language python \
  --cpu 1 \
  --mem 256 \
  --timeout 30
```

### State Directory Permissions

Secure your state directory:

```bash
# Set restrictive permissions
chmod 700 ~/.local/share/era-agent

# Or custom location with proper permissions
export AGENT_STATE_DIR=/secure/path
chmod 700 $AGENT_STATE_DIR
```

## Next Steps

Now that you have ERA Agent running locally, explore:

- **[CLI Usage Guide](/docs/local/cli-usage)** - Complete CLI reference
- **[HTTP Server Mode](/docs/local/http-server)** - REST API documentation
- **[MCP Server Setup](/docs/local/mcp-server)** - Claude Desktop integration
- **[Docker Deployment](/docs/local/docker-deployment)** - Containerized deployment
- **[API Reference](/docs/api-reference)** - Complete API documentation

## Comparison with Hosted

| Feature | Local (This Guide) | Hosted (Cloudflare) |
|---------|-------------------|---------------------|
| **Setup** | Build from source | Zero config |
| **Infrastructure** | Docker/Firecracker | Managed |
| **Privacy** | Complete (all local) | Data goes to Cloudflare |
| **Cost** | Free (your hardware) | Pay per use |
| **Latency** | ~10ms | ~50-200ms |
| **Customization** | Full control | Limited |
| **Network Access** | Disabled by default | Enabled by default |
| **Best For** | Development, sensitive data | Production, AI tools |

Want to try the hosted version instead? â†’ [Hosted Quickstart](/docs/quickstart-hosted)
